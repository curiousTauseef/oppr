<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add a heuristic solver — add_heuristic_solver • oppr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Add a heuristic solver — add_heuristic_solver" />

<meta property="og:description" content="Specify that solutions should be generated using a backwards step-wise
heuristic algorithm (inspired by Cabeza et al. 2004,
Korte &amp;amp; Vygen 2000). Ideally,
solutions should be generated using exact algorithm solvers (e.g.
add_rsymphony_solver or add_gurobi_solver)
because they can guaranteably identify optimal solutions (Rodrigues &amp;amp; Gaston
2002)." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oppr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/oppr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/oppr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add a heuristic solver</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/oppr/blob/master/R/add_heuristic_solver.R'><code>R/add_heuristic_solver.R</code></a></small>
    <div class="hidden name"><code>add_heuristic_solver.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Specify that solutions should be generated using a backwards step-wise
heuristic algorithm (inspired by Cabeza <em>et al.</em> 2004,
Korte &amp; Vygen 2000). Ideally,
solutions should be generated using exact algorithm solvers (e.g.
<code>add_rsymphony_solver</code> or <code>add_gurobi_solver</code>)
because they can guaranteably identify optimal solutions (Rodrigues &amp; Gaston
2002).</p>
    
    </div>

    <pre class="usage"><span class='fu'>add_heuristic_solver</span>(<span class='no'>x</span>, <span class='kw'>number_solutions</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code>ProjectProblem-class</code> object.</p></td>
    </tr>
    <tr>
      <th>number_solutions</th>
      <td><p><code>integer</code> number of solutions desired.
Defaults to 1. Note that the number of returned solutions can sometimes
be less than the argument to <code>number_solutions</code> depending on the
argument to <code>solution_pool_method</code>, for example if 100
solutions are requested but only 10 unique solutions exist, then only 10
solutions will be returned.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p><code>logical</code> should information be printed while solving
optimization problems?</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>ProjectProblem-class</code> object with the solver added
  to it.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The specific algorithm used to generate solutions depends on the
 the objective specified for the project prioritization
 <code>problem</code>.</p>
<p>For objectives which maximize benefit subject to budgetary constraints
 (e.g. <code>add_max_richness_objective</code>):</p>
<p></p><ol>
<li><p>All actions are initially selected for funding (excepting actions
   which are locked out).</p></li>
<li><p>The next step is repeated until (i) the number of desired
   solutions is obtained and (ii) the total cost of the remaining
   actions that are selected for funding is within the budget.</p></li>
<li><p>Each of the remaining actions that are currently selected for
   funding (excepting actions which are locked in or actions which have zero
   cost) are evaluated according to how much the performance of the
   solution decreases when the action is deselected for funding, relative to
   the cost of the action. This can be expressed mathematically as:</p>
<p>$$B_l = \frac{V(L) - V(L - l)}{C_l}$$</p>
<p>Where \(L\) is the set of remaining actions currently
   selected for funding (indexed by \(l\)), \(B_l\) is the benefit
   associated with funding action \(l\), \(V(L)\) is the objective
   value associated with the solution where all remaining actions are
   funded, \(V(L - l)\) is the objective value associated with the
   solution where all remaining actions except for the action \(l\) are
   funded, and \(C_l\) is the cost of action \(l\).</p>
<p>The action with the smallest benefit (i.e. \(B_l\) value) is then
   deselected for funding.</p></li>
</ol>
    <p>For objectives which minimize cost subject to biodiversity constraints
(i.e. <code>add_min_set_objective</code>):</p>
<p></p><ol>
<li><p>All actions are initially selected for funding (excepting actions
   which are locked out).</p></li>
<li><p>The next step is repeated until (i) the number of desired
   solutions is obtained or (ii) no action can be deselected for funding
   without the probability of any feature expecting to persist falling below
   its target probability of persistence.</p></li>
<li><p>Each of the remaining actions that are currently selected for
   funding (excepting actions which are locked in or actions which have zero
   cost) are evaluated according to how much the performance of the
   solution decreases when the action is deselected for funding, relative to
   the cost of the action. This can be expressed mathematically as:</p>
<p>$$B_l = \frac{\big(\sum_{f}^{F} P_f(L) - T_f \big) -
   \big( \sum_{f}^{F} P_f(L - l) - T_f \big)}{C_l}$$</p>
<p>Where \(F\) is the set of features (indexed by \(f\)),
   \(T_f\) is the target for feature \(f\), \(L\) is the set of
   selected for funding (indexed by \(l\)), \(C_l\) is the cost of
    action \(l\), \(B_l\) is the benefit
   associated with funding action \(l\), \(P(L)\) is probability
   that each feature is expected to persist when the remaining actions
   (\(L\)) are funded, and \(P(L - l)\) is the probability that
   each feature is expected to persist when all the remaining actions except
   for action \(l\) are funded.</p>
<p>The action with the smallest benefit (i.e. \(B_l\) value) is then
   deselected for funding.</p></li>
</ol>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Rodrigues AS &amp; Gaston KJ (2002) Optimisation in reserve selection
procedures---why not? <em>Biological Conservation</em>, <strong>107</strong>,
123--129.</p>
<p>Cabeza M, Araujo MB, Wilson RJ, Thomas CD, Cowley MJ &amp; Moilanen A (2004)
Combining probabilities of occurrence with spatial reserve design.
<em>Journal of Applied Ecology</em>, <strong>41</strong>, 252--262.</p>
<p>Korte B &amp; Vygen J (2000)
<em>Combinatorial Optimization. Theory and Algorithms</em>. Springer-Verlag,
Berlin, Germany.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>solvers</code>.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># load ggplot2 package for making plots</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>ggplot2</span>)

<span class='co'># load data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>sim_projects</span>, <span class='no'>sim_features</span>, <span class='no'>sim_actions</span>)

<span class='co'># build problem with heuristic solver and $200</span>
<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'>problem</span>(<span class='no'>sim_projects</span>, <span class='no'>sim_actions</span>, <span class='no'>sim_features</span>,
             <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"name"</span>) <span class='kw'>%&gt;%</span>
     <span class='fu'>add_max_richness_objective</span>(<span class='kw'>budget</span> <span class='kw'>=</span> <span class='fl'>200</span>) <span class='kw'>%&gt;%</span>
     <span class='fu'>add_binary_decisions</span>() <span class='kw'>%&gt;%</span>
     <span class='fu'>add_heuristic_solver</span>()

<span class='co'># print problem</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>p1</span>)</div><div class='output co'>#&gt; <span class='message'>Project Prioritization Problem</span>
#&gt; <span class='message'>  actions          F1_action, F2_action, F3_action, ... (6 actions)</span>
#&gt; <span class='message'>  projects         F1_project, F2_project, F3_project, ... (6 projects)</span>
#&gt; <span class='message'>  features         F1, F2, F3, ... (5 features)</span>
#&gt; <span class='message'>  action costs:    min: 0, max: 103.22583</span>
#&gt; <span class='message'>  project success: min: 0.81379, max: 1</span>
#&gt; <span class='message'>  objective:       Maximum richness objective [budget (200)]</span>
#&gt; <span class='message'>  targets:         none</span>
#&gt; <span class='message'>  weights:         default</span>
#&gt; <span class='message'>  decisions        Binary decision </span>
#&gt; <span class='message'>  constraints:     &lt;none&gt;</span>
#&gt; <span class='message'>  solver:          Heuristic [number_solutions (1), verbose (1)]</span></div><div class='input'>
<span class='co'># solve problem</span>
<span class='no'>s1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/solve'>solve</a></span>(<span class='no'>p1</span>)

<span class='co'># print solution</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>s1</span>)</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 x 21</span><span>
#&gt;   solution status   obj  cost F1_action F2_action F3_action F4_action F5_action
#&gt;      </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>        1 </span><span style='color: #BB0000;'>NA</span><span>      2.19  195.         1         1         0         0         0
#&gt; </span><span style='color: #949494;'># ... with 12 more variables: baseline_action </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F1_project </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>,
#&gt; #   F2_project </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F3_project </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F4_project </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F5_project </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>,
#&gt; #   baseline_project </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F1 </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F2 </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F3 </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F4 </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, F5 </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span></div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>p1</span>, <span class='no'>s1</span>)</div><div class='img'><img src='add_heuristic_solver-1.png' alt='' width='700' height='433' /></div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com/'>Richard Schuster</a>, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, <a href='https://josephrbennett.wordpress.com/'>Joeseph Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

